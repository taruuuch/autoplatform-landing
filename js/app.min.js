const phoneInput=document.querySelector('input[name="phone"]'),phoneModal=document.querySelector("input#modal-phone");new IMask(phoneInput,{mask:"+{38} (000) 000-00-00"}),new IMask(phoneModal,{mask:"+{38} (000) 000-00-00"});const reviewSlider=tns({container:".review__list",items:1,controls:!1,autoHeight:!0,nav:!0,navPosition:"bottom",mouseDrag:!0,speed:400,touch:!0}),body=document.getElementsByTagName("body")[0],requestActive=()=>{const e=document.getElementById("request-modal"),t=Array.from(document.getElementsByClassName("btn-light"));let o=Array.from(document.getElementsByClassName("btn-secondary"));t.forEach(e=>{o.push(e)});e.onclick=function(t){t.target.closest("#request-modal__container")||(e.classList.remove("open"),body.style.overflow="auto",body.style.marginRight="0")},o.forEach(t=>{t.onclick=function(t){t.preventDefault(),(t=>{let o;o=null!=t?`Заказ автовышки на ${t}м`:"Заказ автовышки",document.getElementById("modal-description").value=o,e.classList.add("open"),body.style.overflow="hidden"})(this.getAttribute("data-type"))}})},navigationActive=()=>{const e=document.getElementById("header").offsetHeight,t=document.getElementById("header__collapse"),o=document.getElementById("navigation"),n=document.querySelectorAll(".header__navigation-link");t.onclick=function(t){this.classList.toggle("active"),o.classList.toggle("active"),o.style.top=`${e}px`,o.style.height=`calc(100vh - ${e}px)`,""==body.style.overflowY||"hidden"!=body.style.overflowY?body.style.overflowY="hidden":body.style.overflowY="",n.forEach((e,t)=>{e.style.animation?e.style.animation="":e.style.animation=`navFade .5s ease forwards ${t/7+.3}s`})}},formSend=()=>{const e=document.getElementById("infoForm"),t=document.getElementById("request-modal");let o=[];o.push(e),o.push(t),o.forEach(e=>{e.onsubmit=function(e){e.preventDefault(),e.stopImmediatePropagation();const t=new FormData;let o;t.append("name",e.target.name.value),t.append("phone",e.target.phone.value),e.target.description?(t.append("phone",e.target.phone.value),o=e.target[3]):o=e.target[2],o.setAttribute("disabled","disabled"),n(t,o),this.reset()}});const n=(e,t)=>fetch("/mail/send.php",{method:"POST",body:e}).then(e=>e.text()).then(e=>{t.removeAttribute("disabled"),t.innerHTML="Заявка отправлена!",setTimeout(()=>{t.innerHTML="Заказать"},3e3)})},smoothScroll=()=>{document.querySelectorAll(".header__navigation-link").forEach(e=>{e.onclick=function(e){e.preventDefault();const t=this.getAttribute("href");document.querySelector(t).scrollIntoView({behavior:"smooth",block:"center"})}})};requestActive(),navigationActive(),formSend(),smoothScroll();
